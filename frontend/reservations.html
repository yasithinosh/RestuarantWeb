<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservations ‚Äì La Bella Cucina</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/reservations.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

    <!-- ‚îÄ‚îÄ Navbar ‚îÄ‚îÄ -->
    <nav class="navbar light" id="navbar">
        <a href="index.html" class="nav-logo">
            <div class="nav-logo-icon">üçù</div>
            <div class="nav-logo-text">La Bella Cucina<small>Ristorante Italiano</small></div>
        </a>
        <div class="nav-links" id="nav-links">
            <a href="index.html">Home</a>
            <a href="menu.html">Menu</a>
            <a href="order.html">Order Online</a>
            <a href="reservations.html" class="active">Reservations</a>
            <a href="gallery.html">Gallery</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
        </div>
        <div class="nav-actions">
            <a href="login.html" class="btn btn-outline btn-sm" id="nav-login">Login</a>
            <button onclick="auth.logout()" class="btn btn-sm"
                style="display:none;background:rgba(255,255,255,0.1);color:#fff;border:1px solid rgba(255,255,255,0.2)"
                id="nav-logout">
                <i class="fa-solid fa-right-from-bracket"></i> <span id="nav-username"></span>
            </button>
        </div>
        <button class="nav-hamburger" id="hamburger" onclick="toggleMobileMenu()">
            <span></span><span></span><span></span>
        </button>
    </nav>

    <!-- ‚îÄ‚îÄ Page Header ‚îÄ‚îÄ -->
    <div class="page-header" style="padding-top:120px">
        <div class="container">
            <h1>üìÖ Make a Reservation</h1>
            <p>Book your table in under 60 seconds</p>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Reservation Form ‚îÄ‚îÄ -->
    <section class="section-pad">
        <div class="container">
            <div class="reservation-layout">

                <!-- Form -->
                <div class="reservation-form-card">
                    <h2 style="font-family:var(--font-serif);margin-bottom:var(--space-lg)">Reserve Your Table</h2>

                    <!-- Success message (hidden by default) -->
                    <div id="success-msg"
                        style="display:none;background:#D1FAE5;border:1px solid #6EE7B7;border-radius:var(--radius-md);padding:var(--space-lg);margin-bottom:var(--space-lg)">
                        <h3 style="color:var(--clr-success);margin-bottom:6px">üéâ Reservation Confirmed!</h3>
                        <p style="margin:0;color:var(--clr-success)">We'll send you a confirmation email shortly. We
                            look forward to welcoming you!</p>
                    </div>

                    <form id="reservation-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Full Name *</label>
                                <input type="text" id="r-name" class="form-input" placeholder="Maria Rossi" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email Address *</label>
                                <input type="email" id="r-email" class="form-input" placeholder="maria@example.com"
                                    required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Phone Number *</label>
                                <input type="tel" id="r-phone" class="form-input" placeholder="+27 82 555 0100"
                                    required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Number of Guests *</label>
                                <select id="r-guests" class="form-select" required>
                                    <option value="">Select guests</option>
                                    <option value="1">1 guest</option>
                                    <option value="2">2 guests</option>
                                    <option value="3">3 guests</option>
                                    <option value="4">4 guests</option>
                                    <option value="5">5 guests</option>
                                    <option value="6">6 guests</option>
                                    <option value="7">7+ guests (call us)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Date *</label>
                                <input type="date" id="r-date" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Preferred Time *</label>
                                <select id="r-time" class="form-select" required>
                                    <option value="">Select time</option>
                                    <optgroup label="Lunch">
                                        <option>12:00</option>
                                        <option>12:30</option>
                                        <option>13:00</option>
                                        <option>13:30</option>
                                        <option>14:00</option>
                                        <option>14:30</option>
                                    </optgroup>
                                    <optgroup label="Dinner">
                                        <option>18:00</option>
                                        <option>18:30</option>
                                        <option>19:00</option>
                                        <option>19:30</option>
                                        <option>20:00</option>
                                        <option>20:30</option>
                                        <option>21:00</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Special Requests</label>
                            <textarea id="r-notes" class="form-textarea"
                                placeholder="Dietary requirements, celebrations, seating preferences‚Ä¶"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%;justify-content:center"
                            id="submit-btn">
                            <i class="fa-solid fa-calendar-check"></i> Confirm Reservation
                        </button>
                    </form>
                </div>

                <!-- Info Sidebar -->
                <div class="reservation-info-card">
                    <div class="reservation-info-img"></div>
                    <div class="reservation-info-body">
                        <h3>Good to Know</h3>
                        <div class="info-row">
                            <i class="fa-regular fa-clock"></i>
                            <div><strong style="color:#fff">Opening Hours</strong><br>
                                Mon‚ÄìThu: Lunch 12‚Äì15:00 ¬∑ Dinner 18‚Äì22:00<br>
                                Fri‚ÄìSat: Lunch 12‚Äì15:30 ¬∑ Dinner 18‚Äì23:00<br>
                                Sunday: Lunch 12‚Äì16:00 only
                            </div>
                        </div>
                        <div class="info-row">
                            <i class="fa-solid fa-users"></i>
                            <div><strong style="color:#fff">Large Groups</strong><br>For groups of 8+, please call us
                                directly at +27 21 555 0198.</div>
                        </div>
                        <div class="info-row">
                            <i class="fa-solid fa-cake-candles"></i>
                            <div><strong style="color:#fff">Special Occasions</strong><br>Let us know if you're
                                celebrating ‚Äî we'll arrange something special.</div>
                        </div>
                        <div class="info-row">
                            <i class="fa-solid fa-location-dot"></i>
                            <div>24 Olive Street, Cape Town, 8001</div>
                        </div>
                        <a href="tel:+27215550198" class="btn btn-gold"
                            style="width:100%;justify-content:center;margin-top:var(--space-md)">
                            <i class="fa-solid fa-phone"></i> Call Us
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <footer style="background:var(--clr-dark);color:rgba(255,255,255,0.6);text-align:center;padding:var(--space-xl) 0">
        <div class="container">
            <p style="margin:0">¬© 2026 La Bella Cucina ¬∑ <a href="index.html" style="color:var(--clr-gold)">Home</a></p>
        </div>
    </footer>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Set min date to today
        document.getElementById('r-date').min = new Date().toISOString().split('T')[0];

        window.addEventListener('scroll', () => {
            document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 30);
        });
        function toggleMobileMenu() {
            document.getElementById('nav-links').classList.toggle('open');
            document.getElementById('hamburger').classList.toggle('open');
        }

        document.getElementById('reservation-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submit-btn');
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Submitting‚Ä¶';
            btn.disabled = true;

            const body = {
                name: document.getElementById('r-name').value,
                email: document.getElementById('r-email').value,
                phone: document.getElementById('r-phone').value,
                guests: parseInt(document.getElementById('r-guests').value),
                date: document.getElementById('r-date').value,
                time: document.getElementById('r-time').value,
                notes: document.getElementById('r-notes').value,
            };

            try {
                await api.createReservation(body);
                document.getElementById('reservation-form').style.display = 'none';
                document.getElementById('success-msg').style.display = 'block';
            } catch (err) {
                showToast(err.message, 'error');
                btn.innerHTML = '<i class="fa-solid fa-calendar-check"></i> Confirm Reservation';
                btn.disabled = false;
            }
        });
    </script>
</body>

</html>